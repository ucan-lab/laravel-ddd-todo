## アプリケーションサービス層

- システムのコントロールを担う層
- ユースケースの流れを作る(式事)
- 具体的な処理はドメインやインフラストラクチャに移譲

### 概要

ドメイン層が公開している操作(public method)を組み合わせてユースケースを実現する。

ユースケース層とプレゼンテーション層のやりとりは入力用(Input)と出力用(Output)に分けてDTO(Data Transfer Object)を使ってやりとりする。
こうすることでドメインからDTOへ詰め替えコストが発生しますが、ドメイン層の修正の影響をプレゼンテーション層が直接受けなくなるメリットがあります。

長期的に保守性を高めるにはDTOに詰め替えて返す方が良いです。

また、参照系の処理をリポジトリだけで表現すると以下の問題が発生します。

- 複数の集約からドメインオブジェクトを取得して DTO に詰め替える処理が、ループが増えて読みにくいコードになる
- 画面に返す必要のないデータも一緒に取得するのでパフォーマンスが悪化する
- 複数集約の条件で絞り込んでのページングができない

これらの問題を解決するためには参照用のQueryService層を導入すると良いです。
